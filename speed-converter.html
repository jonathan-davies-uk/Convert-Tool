<!--
    Convert Tool 

    @copyright Jonathan Davies 2025
    @license Apache-2.0

      Copyright 2025 Jonathan Davies

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <!-- 
    <meta name="copyright" content="copyright here">
    <meta name="license" content="license here"> 
    <meta name="author" content="Jonathan Davies">
    <meta name="description" content="generic description of the page">
    <meta name="keywords" content="keyword1, keyword2, keyword3">
    -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speed Converter</title>
    <link rel="assets/css/style.css href="style.css">
    <script src="assets/js/Convert-Speed.js" defer></script>
</head>
<body>
  <h1>Speed Converter</h1>
  <form id="converter-form" onsubmit="return false;">
  <label for="input-value">Value:</label>
  <input type="number" id="input-value" required step="any">
  <br>
  <label for="input-unit">From:</label>
  <select id="input-unit"></select>
  <br>
  <label for="output-unit">To:</label>
  <select id="output-unit"></select>
  </form>
  <div id="output" style="margin-top:1em;font-weight:bold;"></div>
  <script>

    // Use SPEED_UNITS with optgroups
    const rawUnits = window.SPEED_UNITS = [
      "[Metric]", "Nanometers per second (nm/s)", "Micrometers per second (μm/s)", "Micrometers per second (μm/s)", "Millimeters per second (mm/s)", "Centimeters per second (cm/s)", "Centimeters per minute (cm/min)", "Metres per hour (m/h)", "Metres per minute (m/min)", "Kilometres per hour (km/h)", "Metres per second (m/s)", "Millimeters per minute (mm/min)", "Micrometers per minute (μm/min)", "Nanometers per minute (nm/min)", "Centimeters per hour (cm/h)", "Millimeters per hour (mm/h)", "Micrometers per hour (μm/h)", "Nanometers per hour (nm/h)", "Kilometres per minute (km/min)", "Kilometers per second (km/s)",
      "[Imperial]", "Inches per hour (in/h)", "Feet per hour (ft/h)", "Furlongs per fornight", "Yards per hour (yd/h)", "Inches per minute (in/min)", "Feet per minute (ft/min)", "Yards per minute (yd/min)", "Inches per second (in/s)", "Feet per second (ft/s)", "Yards per second (yd/s)", "Miles per minute (mi/min)", "Miles per second (mi/s)",
      "[Scientific]", "Sound in standard atmosphere", "Sound in water", "Lunar escape velocity", "Earth escape velocity", "Earth's solar orbit", "Solar system's Milky Way orbit", "Milky Way relative to the cosmic microwave background", "Solar escape velocity", "Neutron star escape velocity (0.3c)", "Light in a diamond (0.4136c)", "Signal in an optical fibre (0.667c)", "Light (c)", "Mach 1", "Mach 1 SI Standard",
      "[Comparisons]", "Usain Bolt's top speed", "Jet airliner cruising speed", "Concorde", "SR-71 Blackbird", "Space Shuttle", "International Space Station",
    ];

    function fillSelectWithGroups(id) {
      const sel = document.getElementById(id);
      sel.innerHTML = '';
      let currentOptGroup = null;
      rawUnits.forEach(u => {
        if (u.startsWith('[') && u.endsWith(']')) {
          currentOptGroup = document.createElement('optgroup');
          currentOptGroup.label = u.replace(/\[|\]/g, '');
          sel.appendChild(currentOptGroup);
        } else {
          const opt = document.createElement('option');
          opt.value = u;
          opt.textContent = u;
          if (currentOptGroup) {
            currentOptGroup.appendChild(opt);
          } else {
            sel.appendChild(opt);
          }
        }
      });
    }
    fillSelectWithGroups('input-unit');
    fillSelectWithGroups('output-unit');

    function doConversion() {
      const value = parseFloat(document.getElementById('input-value').value);
      const fromUnit = document.getElementById('input-unit').value;
      const toUnit = document.getElementById('output-unit').value;
      if (!isNaN(value) && typeof convertSpeed === 'function') {
        const result = convertSpeed(value, fromUnit, toUnit);
        document.getElementById('output').textContent = (result !== null) ? `${value} ${fromUnit} = ${result} ${toUnit}` : 'Invalid unit selection.';
      } else {
        document.getElementById('output').textContent = '';
      }
    }
    document.getElementById('input-value').addEventListener('input', doConversion);
    document.getElementById('input-unit').addEventListener('change', doConversion);
    document.getElementById('output-unit').addEventListener('change', doConversion);
    // Optionally, trigger conversion on page load if desired
    doConversion();
  </script>
</body>
</html>